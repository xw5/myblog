# \r,\n,\r\n的前世今生

### **前情**

最近在逛论坛的时候遇到有人在提问题，为什么\n在苹果手机上不换行，我以前有网上看到过文章，是因为各系统的解析不能，需要使用\r\n来做兼容，但是没有更深入了解，今天遇到有人踩坑了，自己虽然知道怎么解决，但是不知具体原因，今特来详细了解。

### 它们的来历并引起分歧的原由

“回车”（carriage return）和“换行”（line feed）这两个概念的来历和区别:

在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model 33）的玩意，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时候，要用去0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。

于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界；另一个叫做“换行”，告诉打字机把纸向下移一行。

后来，计算机发明了，这两个概念也就被般到了计算机上。那时，存储器很贵，一些科学家认为在每行结尾加两个字符太浪费了，加一个就可以。于是，就出现了分歧。

Unix系统里，每行结尾只有“<换行>”，即“\n”；Windows系统里面，每行结尾是“<换行><回车>”，即“\n\r”；Mac系统里，每行结尾是“<回车>”。一个直接后果是，Unix/Mac系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个^M符号。

### \r-软空格

在Linux、unix 中表示返回到当行的最开始位置

在Mac OS 中表示换行且返回到下一行的最开始位置，相当于Windows 里的 \n 的效果

### \n-软回车

在Windows 中表示换行且回到下一行的最开始位置。相当于Mac OS 里的 \r 的效果

在Linux、unix 中只表示换行，但不会回到下一行的开始位置

### 文件中的换行符号

\n LF或ASCII中的0x0A(10)；\r CR或ASCII中的0x0D(13)

- linux,unix: \r\n
- windows : \n
- Mac OS ： \r

### 使用注意事项

1. 它们在双引号或定界符表示的字符串中有效，在单引号表示的字符串中无效
2. \r\n 一般一起用，用来表示键盘上的回车键，也可只用 \n